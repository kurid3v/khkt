{% extends "base.html" %}
{% block title %}‚ûï Th√™m b√†i t·∫≠p{% endblock %}

{% block content %}
<style>
    .form-container { max-width: 700px; margin: 30px auto; background: #f9f9f9; padding: 25px 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); font-family: 'Segoe UI', sans-serif; }
    .form-group { margin-bottom: 18px; }
    .form-group label { font-weight: 600; margin-bottom: 6px; display: block; }
    .form-group input[type="text"], .form-group textarea, .form-group select { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; font-size: 15px; }
    .form-group textarea { resize: vertical; min-height: 100px; }
    .submit-btn { display: block; width: 100%; padding: 12px; background-color: #3498db; color: white; font-size: 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
    .submit-btn:hover { background-color: #2980b9; }
    .choice-group { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
</style>

<div class="form-container">
    <h2>üìù Th√™m b√†i t·∫≠p cho ƒë·ªÅ: <span style="color: #e74c3c;">{{ exam.title }}</span></h2>

    <form method="POST">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="question_text">C√¢u h·ªèi</label>
            {{ form.question_text }}
        </div>

        <div class="form-group">
            <label for="problem_type">Lo·∫°i b√†i t·∫≠p</label>
            {{ form.problem_type }}
        </div>

        <div id="mcq-section" style="display: none;">
            <h5>üí° Nh·∫≠p c√°c l·ª±a ch·ªçn tr·∫Øc nghi·ªám</h5>
            {% for label in "ABCD" %}
            <div class="choice-group">
                <label><strong>{{ label }}.</strong></label>
                <input type="text" name="choice_{{ label }}" placeholder="ƒê√°p √°n {{ label }}" class="form-control">
                <label>
                    <input type="checkbox" name="correct_{{ label }}"> ƒê√°p √°n ƒë√∫ng
                </label>
            </div>
            {% endfor %}
        </div>

        <button type="submit" class="submit-btn">‚ûï Th√™m b√†i</button>
    </form>
</div>

<script>
    // Hi·ªán/·∫©n ph·∫ßn nh·∫≠p tr·∫Øc nghi·ªám n·∫øu ƒë∆∞·ª£c ch·ªçn
    document.addEventListener("DOMContentLoaded", function () {
        const typeField = document.querySelector("select[name='problem_type']");
        const mcqSection = document.getElementById("mcq-section");

        function toggleMcq() {
            if (typeField.value === "multiple_choice") {
                mcqSection.style.display = "block";
            } else {
                mcqSection.style.display = "none";
            }
        }

        typeField.addEventListener("change", toggleMcq);
        toggleMcq();  // g·ªçi khi trang t·∫£i
    });
</script>
{% endblock %}
